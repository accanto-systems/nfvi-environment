ddns-update-style interim;
ignore client-updates;
authoritative;
allow booting;
allow bootp;
allow unknown-clients;
# Set default and max IP lease time to infinite  with -1 value
default-lease-time -1;
max-lease-time -1;

subnet {{ dhcp_network }} netmask {{ dhcp_netmask }} {
        option routers {{ dhcp_options_router }};
        option domain-name-servers {{ dhcp_options_dns }};
        option ntp-servers {{ dhcp_options_ntp_server }};
        option domain-search {{ dhcp_options_dns_search }};
        filename "pxelinux.0";
        {% for vm in groups['openshift-helpers'] %}
        next-server {{ hostvars[vm].ansible_host }};
        {% endfor %} 
        {% for vm in groups['openshift-masters'] %}
          {% if vm not in groups['openshift-bootstraps'] %}
            host {{ vm }} { hardware ethernet {{ hostvars[vm].mac_address }}; fixed-address {{ hostvars[vm].ansible_host }}; option host-name "{{ vm }}"; }
          {% endif %}
        {% endfor %} 
        {% for vm in groups['openshift-bootstraps'] %}
          host {{ vm }} { hardware ethernet {{ hostvars[vm].mac_address }}; fixed-address {{ hostvars[vm].ansible_host }}; option host-name "{{ vm }}"; }
        {% endfor %}
        {% for vm in groups['openshift-workers'] %}
          host {{ vm }} { hardware ethernet {{ hostvars[vm].mac_address }}; fixed-address {{ hostvars[vm].ansible_host }}; option host-name "{{ vm }}"; }
        {% endfor %}
}